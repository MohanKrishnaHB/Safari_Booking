<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safari Booking Bill</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .required::after { content: " *"; color: red; }
    .bill { background-color: #fff; padding: 20px; border: 1px solid #ccc; margin-top: 20px; }
    .error-border { border: 2px solid red !important; }
  </style>
  
</head>
<body class="bg-light">
<div class="container py-4">
  <h2 class="text-center mb-4">Safari Booking Bill</h2>
  <form id="bookingForm" class="bill">
    <div class="row mb-3">
      <div class="col-md-4">
        <label for="date" class="form-label required">Date</label>
        <input type="date" class="form-control" id="date" name="date" required>
      </div>
      <div class="col-md-4">
        <label for="Guest type" class="form-label required">Guest type</label>
        <select class="form-select" id="guestType" name="guestType" required>
          <option value="Public" selected>Public</option>
          <option value="forest official onduty">Forest official onduty</option>
          <option value="forest official ofduty">Forest official ofduty</option>
          <option value="other officials">Other officials</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="guestName" class="form-label required">Guest Name</label>
        <input type="text" class="form-control" id="guestName" required>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-4">
        <label for="guestCount" class="form-label required">Number of Guests</label>
        <input type="number" min="1" class="form-control" id="guestCount" required>
      </div>
    </div>

    <h5 class="mt-4">Additional Charges</h5>
    <div class="row mb-3">
      <div class="col-md-2">
        <label>Cars</label>
        <select class="form-select" id="cars">
          <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option>
        </select>
      </div>
      <div class="col-md-2">
        <label>Mini Bus</label>
        <select class="form-select" id="minibus">
          <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option>
        </select>
      </div>
      <div class="col-md-2">
        <label>Bus</label>
        <select class="form-select" id="bus">
          <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option>
        </select>
      </div>
    </div>

    <h5 class="mt-4">Rooms</h5>
    <div class="mb-3">
      <div class="form-check">
        <input class="form-check-input room" type="checkbox" id="kaveri1">
        <label class="form-check-label" for="kaveri1">Kaveri Room 1 - ₹2800</label>
      </div>
      <div class="form-check">
        <input class="form-check-input room" type="checkbox" id="kaveri2">
        <label class="form-check-label" for="kaveri2">Kaveri Room 2 - ₹2800</label>
      </div>
      <div class="form-check">
        <input class="form-check-input room" type="checkbox" id="gangotry1">
        <label class="form-check-label" for="gangotry1">Gangotry Room 1 - ₹2464</label>
      </div>
      <div class="form-check">
        <input class="form-check-input room" type="checkbox" id="gangotry2">
        <label class="form-check-label" for="gangotry2">Gangotry Room 2 - ₹2464</label>
      </div>
      <div class="form-check">
        <input class="form-check-input room" type="checkbox" id="dormatory">
        <label class="form-check-label" for="dormatory">Dormitory Room - ₹2688</label>
      </div>
    </div>
    
  </form>

  <table class="table" id="bill">
    <tr>
      <th>Item</th>
      <th>Quantity</th>
      <th>Unit Price</th>
      <th>Price</th>
    </tr>
      <td>Cars</td>
      <td><span id="car-qty"></span></td>
      <td>118</td>
      <td><span id="car-price"></span></td>
    </tr>
    <tr>
      <td>mini bus</td>
      <td><span id="mini-qty"></span></td>
      <td>238</td>
      <td><span id="mini-price"></span></td>
    </tr>
    <tr>
      <td>bus</td>
      <td><span id="bus-qty"></span></td>
      <td>354</td>
      <td><span id="bus-price"></span></td>
    </tr>
    <tr>
      <td>kaveri room1</td>
      <td><span id="kaveri1-qty"></span></td>
      <td>2800</td>
      <td><span id="kaveri1-price"></span></td>
    </tr>
    <tr>
      <td>kaveri room2</td>
      <td><span id="kaveri2-qty"></span></td>
      <td>2800</td>
      <td><span id="kaveri2-price"></span></td>
    </tr>
    <tr>
      <td>gangotry room1</td>
      <td><span id="gangotry1-qty"></span></td>
      <td>2464</td>
      <td><span id="gangotry1-price"></span></td>
    </tr>
    <tr>
      <td>gangotry room2</td>
      <td><span id="gangotry2-qty"></span></td>
      <td>2464</td>
      <td><span id="gangotry2-price"></span></td>
    </tr>
    <tr>
      <td>dormatory room</td>
      <td><span id="dor-qty"></span></td>
      <td>2688</td>
      <td><span id="dor-price"></span></td>
    </tr>
    <tr>
      <th colspan="3">Total</th>
      <th><span id="total-price"></span></th>
    </tr>
  </table>
</div>
<div class="container py-4">

<h5 class="mt-4">Payment</h5>
    <div class="row mb-3">
      <div class="col-md-3">
        <label>Amount paid through Cash</label>
        <input type="number" class="form-control pay-field" id="cash" value="0">
      </div>
      <div class="col-md-3">
        <label>Amount paid through UPI</label>
        <input type="number" class="form-control pay-field" id="upi" value="0">
      </div>
      <div class="col-md-3">
        <label>Transaction Reference</label>
        <input type="text" class="form-control" id="txn">
      </div>
    </div>
    <div class="mb-3">
      <label>Comments</label>
      <textarea class="form-control" id="comments" rows="2"></textarea>
    </div>
    <div class="mt-3 text-end">
       <button class="btn btn-success" id="submitSave">Submit & Save</button>
    </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("date").valueAsDate = new Date();

    const calcTotal = () => {
      const car = parseInt(document.getElementById("cars").value) * 118;
      const minibus = parseInt(document.getElementById("minibus").value) * 238;
      const bus = parseInt(document.getElementById("bus").value) * 354;

      let roomTotal = 0;
      document.querySelectorAll('.room:checked').forEach(cb => {
        roomTotal += parseInt(cb.value);
      });

      const total = car + minibus + bus + roomTotal;
      document.getElementById("total-price").value = total;
      return total;
    };

    ["cars", "minibus", "bus", ...Array.from(document.querySelectorAll('.room')).map(r => r.id)].forEach(id => {
      document.getElementById(id)?.addEventListener("change", calcTotal);
    });

    // Attach submit event handler properly
    document.querySelector("#bookingForm").addEventListener("change",showBill);
  });

  function showBill(e) {
    e.preventDefault();

    // show bill
    var billElement = document.getElementById("bill");
    billElement.style.display = "table";
    var guestType = document.getElementById("guestType").value;
    // collect details filled in form
    var numberOfcars = parseInt(document.getElementById("cars").value);    
    // define unit price
    var unitPriceForCar = 118;
    if(guestType != "Public") {
      unitPriceForCar = 0;
    } 

    // compute car total price
    const carPrice = unitPriceForCar * numberOfcars;
    var carQtyEle = document.getElementById("car-qty");
    carQtyEle.innerHTML = numberOfcars;
    var carpriceEle = document.getElementById("car-price");
    carpriceEle.innerHTML = carPrice;
    
    // collect details filled in form
    var numberOfminibus = parseInt(document.getElementById("minibus").value);
    // define unit price
    var unitPriceForminibus = 238;
    if(guestType != "Public") {
      unitPriceForminibus = 0;
    }

    // compute car total price
    const minibusPrice = unitPriceForminibus * numberOfminibus;
    var minibusQtyEle = document.getElementById("mini-qty");
    minibusQtyEle.innerHTML = numberOfminibus;
    var minibuspriceEle = document.getElementById("mini-price");
    minibuspriceEle.innerHTML = minibusPrice;


    // collect details filled in form
    var numberOfbus = parseInt(document.getElementById("bus").value);
    // define unit price
    var unitPriceForbus = 354;
    if(guestType != "Public") {
      unitPriceForbus = 0;
    }
    // compute car total price
    const busPrice = unitPriceForbus * numberOfbus;
    var busQtyEle = document.getElementById("bus-qty");
    busQtyEle.innerHTML = numberOfbus;
    var buspriceEle = document.getElementById("bus-price");
    buspriceEle.innerHTML = busPrice;


    var kaveriroom1Price;
    var numberOfkaveriroom1;
    // collect details filled in form
    if (document.getElementById("kaveri1").checked) {
      kaveriroom1Price = 2800;
      numberOfkaveriroom1 = 1;
      if(guestType.toLowerCase() == " Forest official onduty".toLowerCase()) {
        kaveriroom1Price = 140;
      }
      else if(guestType=="other officials"){
              kaveriroom1Price = 375;
      }
      else if(guestType.toLowerCase() == "Forest official ofduty".toLowerCase()) {
             kaveriroom1Price = 250;
      }

    } else {
        kaveriroom1Price = 0;
      numberOfkaveriroom1 = 0;
    }

    // compute car total price
    var kaveriroom1QtyEle = document.getElementById("kaveri1-qty");
    kaveriroom1QtyEle.innerHTML = numberOfkaveriroom1;
    var kaveriroom1priceEle = document.getElementById("kaveri1-price");
    kaveriroom1priceEle.innerHTML = kaveriroom1Price;

// collect details filled in form
      var kaveriroom2Price 
      var numberOfkaveriroom2
    if (document.getElementById("kaveri2").checked) {
       kaveriroom2Price = 2800;
       numberOfkaveriroom2 = 1;
       if(guestType.toLowerCase() == "Forest official onduty".toLowerCase()) {
        kaveriroom2Price = 140;
      }
      else if(guestType=="other officials"){
              kaveriroom2Price = 375;
      }
      else if(guestType.toLowerCase() == "Forest official ofduty".toLowerCase()) {
             kaveriroom2Price = 250;
      }

    } else {
         kaveriroom2Price = 0;
        numberOfkaveriroom2 = 0;
    }
    var kaveri2QtyEle = document.getElementById("kaveri2-qty");
    kaveri2QtyEle.innerHTML = numberOfkaveriroom2;
    var kaveriroom2priceEle = document.getElementById("kaveri2-price");
    kaveriroom2priceEle.innerHTML = kaveriroom2Price;

// collect details filled in form
      var gangotryroom1Price
      var numberOfgangotryroom1
    if (document.getElementById("gangotry1").checked) {
       gangotryroom1Price = 2464;
       numberOfgangotryroom1 = 1;
       if(guestType.toLowerCase() == "Forest official onduty".toLowerCase()) {
        gangotryroom1Price = 100;
      }
      else if(guestType=="other officials"){
              kaveriroom1Price = 300;
      }
      else if(guestType.toLowerCase() == "Forest official ofduty".toLowerCase()) {
             kaveriroom1Price = 200;
      }

    } else {
         gangotryroom1Price = 0;
         numberOfgangotryroom1 = 0;

    }
    var gangotryroom1QtyEle = document.getElementById("gangotry1-qty");
    gangotryroom1QtyEle.innerHTML = numberOfgangotryroom1;
    var gangotryroom1priceEle = document.getElementById("gangotry1-price");
    gangotryroom1priceEle.innerHTML = gangotryroom1Price;

// collect details filled in form
      var gangotryroom2Price 
      var numberOfgangotryroom2
    if (document.getElementById("gangotry2").checked) {
       gangotryroom2Price = 2464;
       numberOfgangotryroom2 = 1;
       if(guestType.toLowerCase() == "Forest official onduty".toLowerCase()) {
        kaveriroom1Price = 100;
      }
      else if(guestType=="other officials"){
              kaveriroom1Price = 300;
      }
      else if(guestType.toLowerCase() == "Forest official ofduty".toLowerCase()) {
             kaveriroom1Price = 200;
      }

    } else {
       gangotryroom2Price = 0;
       numberOfgangotryroom2 = 0;

    }
    var gangotryroom2QtyEle = document.getElementById("gangotry2-qty");
    gangotryroom2QtyEle.innerHTML = numberOfgangotryroom2;
    var gangotryroom2priceEle = document.getElementById("gangotry2-price");
    gangotryroom2priceEle.innerHTML = gangotryroom2Price;


// collect details filled in form
      var dormatoryroomPrice 
      var numberOfdormatoryroom 
    if (document.getElementById("dormatory").checked) {
       dormatoryroomPrice = 2688;
       numberOfdormatoryroom = 1;
    } else {
       dormatoryroomPrice = 0;
       numberOfdormatoryroom = 0;

    }
    var dormatoryroomQtyEle = document.getElementById("dor-qty");
    dormatoryroomQtyEle.innerHTML = numberOfdormatoryroom;
    var dormatoryroomQtyEle = document.getElementById("dor-price");
    dormatoryroomQtyEle.innerHTML = dormatoryroomPrice;

    //total
    totalprice= carPrice+ minibusPrice+busPrice+ kaveriroom1Price+kaveriroom2Price+gangotryroom1Price+gangotryroom2Price+dormatoryroomPrice
    var totalQtyEle = document.getElementById("total-price");
    totalQtyEle.innerHTML = totalprice;

    //cash
    var amountpaidEle = document.getElementById("cash");
    amountpaidEle.value = totalprice;
  
  }
  function submitForm(){
    alert("hi")
    
  }
  
  document.querySelector("#submitSave").addEventListener("click",submitForm);
</script>
</body>
</html>